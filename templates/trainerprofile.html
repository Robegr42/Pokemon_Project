{%extends 'base.html'%}
{%load static%}
{%block section%}
<div class="">
  <div class="w-full h-auto py-20 bg-cover items-center justify-center flex flex-col"  style="background-image: url({% static 'images/trainers_section.jpg'%})">
    {%if form%}
      <div>  
        <div class="bg-white w-96 shadow-xl rounded p-5">
          <h1 class="text-3xl font-medium">Registro</h1>
          <p>Si usted ya esta registrado como ciudadano pongase en contacto con el personal de la administracion para solucionar su problema</p>
          <form class="space-y-5 mt-5" method="POST">{%csrf_token%} {{form.as_p}}
          
            <button class="text-center w-full bg-blue-900 rounded-md text-white py-3 font-medium" type="submit">Registrar</button>
          
          </form>
        </div>
      </div>
    {%elif profile%}
    <div class="felx felx-row items-center justify-center">  
      <div class=" inline-block bg-green-400 w-96 shadow-xl rounded p-5">
        <h1 class="text-3xl font-medium">Perfil</h1>

        <div class="space-y-5 mt-5">
          <p>ID: {{profile.id}}</p> 
          <p>Nombre: {{profile.citizen.name}}</p> 
          <p>Sexo: {{profile.citizen.sex}}</p> 
          <p>Age: {{profile.citizen.age}}</p> 
          <p>Region de naciemiento: {{profile.citizen.born_region.code}}</p> 
          <p>Region de residencia: {{profile.citizen.live_region.code}}</p> 
        </div>
        

      </div>
      {%if profile.my_gym%}
        <div class=" inline-block bg-green-400 w-96 shadow-xl rounded p-5">
          <h1 class="text-3xl font-medium">Gym</h1>

          <div class="space-y-5 mt-5">
            <p>ID: {{profile.my_gym.id}}</p> 
            <p>Ciudad: {{profile.my_gym.city.id}}</p>
            <div class="w-24 h-20">
              {%for item in profile.my_gym.gym_member__set.all%}
                {{item.id}}dfsf
              {%endfor%}
            </div>
          </div>
          <div class="inline-block">
            <button onclick="openModal('add-modal')" class=' text-white rounded font-bold'>Añadir miembro</button>
          </div>
           
          
          <div class="add-modal fixed w-full inset-0 z-50 overflow-hidden flex justify-center items-center animated fadeIn faster" style="background: rgba(0,0,0,.7);">
            <div class="border border-black shadow-lg modal-container bg-gray-200  w-4/12 md:max-w-11/12 mx-auto rounded-xl shadow-lg z-50 overflow-y-auto">
              <div class="modal-content py-4 text-left px-6">
                <!--Title-->
                <div class="flex justify-between items-center pb-3">
                  <p class="text-2xl font-bold text-black">Añadir</p>
                  <div class="modal-close cursor-pointer z-50" onclick="modalClose('add-modal')">
                    <svg class="fill-current text-gray-500" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                      viewBox="0 0 18 18">
                      <path
                        d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z">
                      </path>
                    </svg>
                  </div>
                </div>
                <!--Body-->
                <div class="my-5 mr-5 ml-5 flex justify-center text-black">
                  <form method="POST">
                    <input class="h-10" type="text" name="trainer_id" placeholder="ID">{% csrf_token %}
                    <button class=' text-white p-2 rounded font-bold bg-green-400' name="add" type="submit">ok</button>
                    
                  </form>
                     
                   
                </div>
                <!--Footer-->
                <div class="flex justify-end pt-2 space-x-14">
                  <button class="px-4 bg-gray-200 p-3 rounded text-black hover:bg-gray-300 font-semibold" onclick="modalClose('{{item.region.name}}-modal')">Cancel</button>
                </div>
              </div>

        </div>
      {%endif%}

    </div>
    {%endif%}
  </div>
    
</div>
<script>
  all_modals=['add-modal']
  all_modals.forEach((modal)=>{
      const modalSelected = document.querySelector('.'+modal);
      modalSelected.classList.remove('fadeIn');
      modalSelected.classList.add('fadeOut');
      modalSelected.style.display = 'none';
  })
  const modalClose = (modal) => {
      const modalToClose = document.querySelector('.'+modal);
      modalToClose.classList.remove('fadeIn');
      modalToClose.classList.add('fadeOut');
      setTimeout(() => {
          modalToClose.style.display = 'none';
      }, 500);
  }

  const openModal = (modal) => {
      const modalToOpen = document.querySelector('.'+modal);
      modalToOpen.classList.remove('fadeOut');
      modalToOpen.classList.add('fadeIn');
      modalToOpen.style.display = 'flex';
  }

</script>
{%endblock%}